import { Message } from '@marigold/components';

import { Block, Content } from '@/components/Container';
import Caption from '@/components/Caption';
import DemoLink from '@/components/DemoLink';
import Preview from '@/components/Preview';

import SelectExample from './_components/SelectExample';

import BreadcrumbDoc from './breadcrumbs.mdx';
import TabsDoc from './tabs.mdx';

<Block className='text-center'>

    # Compound Components

    <Caption>
    Explore the power of compound components in React with this tutorial.
    </Caption>

</Block>

<Content>

In our application, we often encounter components that rely on each other, sharing state and logic. This
reliance can lead to challenges in managing state, ensuring consistent behavior, and maintaining clean,
organized code. To address these challenges and facilitate a well-structured, reusable, and
customizable API design, React uses a pattern called compound components.

Remember the `<select>` element in HTML with its `<option>` children? Compound components work similarly but
are more powerful and flexible. In this tutorial, we'll explore how to use this pattern to build customizable
and versatility components.

```html
<select>
  <option value="harry-potter">Harry Potter</option>
  <option value="lord-of-the-rings">Lord of the Rings</option>
  <option value="star-wars">Star Wars</option>
</select>
```

## Benefits

Compound components provide a clear way to express relationships between components, making it easier to understand
and manage how different parts of your UI interact. By managing their own internal state and sharing it among child
components, compound components free you from handling state management yourself. This built-in state management ensures
consistent behavior across all related components.

An example of this internal state management can be seen with [Marigold's Select](https://www.marigold-ui.io/components/form/select)
component. The disabled state (`disabledKeys`) and the `onChange` handler are both managed within the parent component,
instead of handling this on every children individually.

```tsx
const [selected, setSelected] = useState<Key>();

return (
  <Select
    label="Select your favorite franchise"
    onChange={setSelected}
    disabledKeys={['star-trek']}
  >
    <Select.Option id="harry-potter">Harry Potter</Select.Option>
    <Select.Option id="lord-of-the-rings">Lord of the Rings</Select.Option>
    <Select.Option id="star-wars">Star Wars</Select.Option>
    <Select.Option id="star-trek">Star Trek</Select.Option>
    <Select.Option id="firefly">Firefly</Select.Option>
  </Select>
);
```

<Message messageTitle="Single Import" variant="info">
  Note how compound components export their related components using dot
  notation (`Select.Option`). This technique allows you to bundle the parent and
  child components together in a single export, making it easy to access and use
  the entire component suite.
</Message>

Additionally, compound components enhance reusability and customization. You can create a flexible parent component with
customizable children, allowing you to reuse and adapt the components for different requirements effortlessly.

<Preview>
  <SelectExample />
</Preview>

</Content>

<Block>

## Use-Cases and Examples

### Example 1: `<select>` and `<option>` in HTML

A similiar example in HTML are the `<select>` and `<option>` tags:

```html select.html
<select>
  <option value="pizza">Pizza</option>
  <option value="sushi">Sushi</option>
  <option value="soup">Soup</option>
</select>
```

The select tag works together with the option tag which is used for a drop-down menu to select items in HTML. Here the `<select>` manages the state of the UI, then the `<option>` elements are configured on how the `<select>` should work.

### Example 2: Building a compound component

<DemoLink to="/compound-component/preview/breadcrumbs">View Demo</DemoLink>

E-commerce websites often have “breadcrumbs” to help the user navigate to parent/grand-parent pages. For example:

`Electronics / Cell Phones / Cases`

---

<BreadcrumbDoc />
<div style={{ height: 100 }} />

### Example 3: Compound component with Context

<DemoLink to="/compound-component/preview/tabs">View Demo</DemoLink>

By leveraging React context, we can provide the necessary states and functions to child components without exposing them through props, resulting in a cleaner and more maintainable codebase.

<TabsDoc />
<div style={{ height: 300 }} />
</Block>
````
